const a2_0x3616=['then','get','push','Nx\x20Cloud:\x20Cache\x20miss\x20','__esModule','axiosException','hashUrls','VERBOSE_LOGGING','defineProperty','cacheError','extractErrorMessage','startRun','retrieve','NX_CLOUD_DISTRIBUTED_EXECUTION_ID','output','messages','scheduledTasks','.\x20Read\x20only\x20token\x20is\x20used.','store','runContext','note','reduce','requests','status','CloudRemoteCache','all','response','statuses','__awaiter','.\x20Status\x20404.','fileStorage','remote-cache-hit','next','forEach','cache-miss','storeRequests','put','api','storage','apply','hash','throw','filter','../../../utilities/environment','done'];(function(_0x31d2f8,_0x361643){const _0x129f83=function(_0x3743f2){while(--_0x3743f2){_0x31d2f8['push'](_0x31d2f8['shift']());}};_0x129f83(++_0x361643);}(a2_0x3616,0x135));const a2_0x129f=function(_0x31d2f8,_0x361643){_0x31d2f8=_0x31d2f8-0x0;let _0x129f83=a2_0x3616[_0x31d2f8];return _0x129f83;};'use strict';var __awaiter=this&&this[a2_0x129f('0x22')]||function(_0x1f65a1,_0x23ba78,_0x19e843,_0x41ac19){function _0x2d44a5(_0x847678){return _0x847678 instanceof _0x19e843?_0x847678:new _0x19e843(function(_0x190522){_0x190522(_0x847678);});}return new(_0x19e843||(_0x19e843=Promise))(function(_0xf9fcf5,_0x3edd7f){function _0x211644(_0x2f5e7d){try{_0x385b8a(_0x41ac19[a2_0x129f('0x26')](_0x2f5e7d));}catch(_0x30903e){_0x3edd7f(_0x30903e);}}function _0x168372(_0x470a8c){try{_0x385b8a(_0x41ac19[a2_0x129f('0x2')](_0x470a8c));}catch(_0x4aa720){_0x3edd7f(_0x4aa720);}}function _0x385b8a(_0x24cd3e){_0x24cd3e[a2_0x129f('0x5')]?_0xf9fcf5(_0x24cd3e['value']):_0x2d44a5(_0x24cd3e['value'])[a2_0x129f('0x6')](_0x211644,_0x168372);}_0x385b8a((_0x41ac19=_0x41ac19[a2_0x129f('0x0')](_0x1f65a1,_0x23ba78||[]))[a2_0x129f('0x26')]());});};Object[a2_0x129f('0xe')](exports,a2_0x129f('0xa'),{'value':!![]});exports[a2_0x129f('0x1e')]=void 0x0;const output_1=require('@nrwl/workspace/src/utilities/output');const environment_1=require(a2_0x129f('0x4'));class CloudRemoteCache{constructor(_0x4bc2ef,_0x2f4412,_0x56cd96,_0x2e8337){this[a2_0x129f('0x15')]=_0x4bc2ef;this[a2_0x129f('0x2b')]=_0x2f4412;this['runContext']=_0x56cd96;this['fileStorage']=_0x2e8337;this['storeRequests']=[];}[a2_0x129f('0x12')](_0x4c1cbb,_0x2c0a9d){var _0x1f6ec6;return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x129f('0x15')][a2_0x129f('0xf')])return![];const _0x423a2f=yield this['hashUrls'](_0x4c1cbb);if(!_0x423a2f||!_0x423a2f[a2_0x129f('0x7')]){if(environment_1[a2_0x129f('0xd')]){output_1[a2_0x129f('0x14')][a2_0x129f('0x1a')]({'title':a2_0x129f('0x9')+_0x4c1cbb+'.'});}this[a2_0x129f('0x19')]['statuses'][_0x4c1cbb]=a2_0x129f('0x28');return![];}try{yield this['fileStorage']['retrieve'](_0x4c1cbb,_0x423a2f['get'],_0x2c0a9d);this['runContext'][a2_0x129f('0x21')][_0x4c1cbb]=a2_0x129f('0x25');return!![];}catch(_0x1220bf){const _0x3ba288=(_0x1f6ec6=_0x1220bf['axiosException'])!==null&&_0x1f6ec6!==void 0x0?_0x1f6ec6:_0x1220bf;if(_0x3ba288[a2_0x129f('0x20')]&&_0x3ba288['response'][a2_0x129f('0x1d')]===0x194){if(environment_1[a2_0x129f('0xd')]){output_1[a2_0x129f('0x14')][a2_0x129f('0x1a')]({'title':a2_0x129f('0x9')+_0x4c1cbb+a2_0x129f('0x23')});}}else{this['messages'][a2_0x129f('0xf')]=this[a2_0x129f('0x15')][a2_0x129f('0x10')](_0x3ba288,'storage');}this[a2_0x129f('0x19')][a2_0x129f('0x21')][_0x4c1cbb]='cache-miss';return![];}});}[a2_0x129f('0x18')](_0x4276ef,_0x340eb5){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x129f('0x15')][a2_0x129f('0xf')])return![];const _0xfbdfec=Promise['resolve']()['then'](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x4ab4d4;const _0x4f3d9d=yield this[a2_0x129f('0xc')](_0x4276ef);if(!_0x4f3d9d)return![];if(!_0x4f3d9d[a2_0x129f('0x2a')]){if(environment_1[a2_0x129f('0xd')]){output_1[a2_0x129f('0x14')]['note']({'title':'Nx\x20Cloud:\x20Skipping\x20storing\x20'+_0x4276ef+a2_0x129f('0x17')});}return!![];}try{yield this[a2_0x129f('0x24')]['store'](_0x4276ef,_0x4f3d9d[a2_0x129f('0x2a')],_0x340eb5);return!![];}catch(_0x94153){const _0x1b70c4=(_0x4ab4d4=_0x94153[a2_0x129f('0xb')])!==null&&_0x4ab4d4!==void 0x0?_0x4ab4d4:_0x94153;this[a2_0x129f('0x15')]['cacheError']=this[a2_0x129f('0x15')][a2_0x129f('0x10')](_0x1b70c4,a2_0x129f('0x2c'));return![];}}));this[a2_0x129f('0x29')][a2_0x129f('0x8')](_0xfbdfec);return _0xfbdfec;});}['hashUrls'](_0x2b692f){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x2b692f in this[a2_0x129f('0x19')][a2_0x129f('0x1c')]){return(yield this[a2_0x129f('0x19')][a2_0x129f('0x1c')][_0x2b692f])[_0x2b692f];}else{const _0x2a7d87=this[a2_0x129f('0x19')][a2_0x129f('0x16')][a2_0x129f('0x3')](_0x3ccbb3=>!this[a2_0x129f('0x19')][a2_0x129f('0x1c')][_0x3ccbb3[a2_0x129f('0x1')]])['map'](_0x2fa008=>_0x2fa008[a2_0x129f('0x1')]);if(_0x2a7d87['indexOf'](_0x2b692f)===-0x1){_0x2a7d87[a2_0x129f('0x8')](_0x2b692f);}const _0x1e9b55=this[a2_0x129f('0x2b')][a2_0x129f('0x11')](environment_1[a2_0x129f('0x13')],_0x2a7d87);_0x2a7d87[a2_0x129f('0x27')](_0x43d32e=>{this['runContext'][a2_0x129f('0x1c')][_0x43d32e]=_0x1e9b55;});return(yield _0x1e9b55)[_0x2b692f];}});}['waitForStoreRequestsToComplete'](){return Promise[a2_0x129f('0x1f')](this[a2_0x129f('0x29')])[a2_0x129f('0x6')](_0x409611=>_0x409611[a2_0x129f('0x1b')]((_0x341148,_0x21cb56)=>_0x341148&&_0x21cb56,!![]));}}exports[a2_0x129f('0x1e')]=CloudRemoteCache;